#!/usr/bin/env php
<?php
// CodeIgniter CLI bootstrap for toolpages
define('FCPATH', __DIR__ . '/public' . DIRECTORY_SEPARATOR);

// Ensure Composer autoload is present
if (! is_file(__DIR__ . '/vendor/autoload.php')) {
    fwrite(STDERR, "Composer autoload not found. Run 'composer install'.\n");
    exit(1);
}
require __DIR__ . '/vendor/autoload.php';

$pathsPath = __DIR__ . '/app/Config/Paths.php';
if (! is_file($pathsPath)) {
    fwrite(STDERR, "App/Config/Paths.php missing.\n");
    exit(1);
}
require $pathsPath;

$paths = new Config\Paths();
define('SYSTEMPATH', rtrim($paths->systemDirectory, '\\/') . DIRECTORY_SEPARATOR);
define('APPPATH', rtrim($paths->appDirectory, '\\/') . DIRECTORY_SEPARATOR);
define('WRITEPATH', rtrim($paths->writableDirectory, '\\/') . DIRECTORY_SEPARATOR);
define('ROOTPATH', rtrim($paths->rootDirectory, '\\/') . DIRECTORY_SEPARATOR);
define('PUBLICPATH', FCPATH);

// Run CodeIgniter's Spark
require SYSTEMPATH . 'Commands/Spark.php';
